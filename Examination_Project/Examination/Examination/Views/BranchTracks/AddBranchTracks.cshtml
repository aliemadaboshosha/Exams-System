@* @model Branch
@{
    ViewData["Title"] = "AddBranchTracks";

    List<Track> tracks = ViewBag.tracks as List<Track>;
    //SelectList alltracks = new SelectList(tracks, "Id", "Name");
    SelectList alltracks = tracks != null ? new SelectList(tracks, "Id", "Name") : new SelectList(new List<Track>(), "Id", "Name");

    List<Instructor> instructors = ViewBag.instructors as List<Instructor>;
   // SelectList allinstructors = new SelectList(instructors, "Id", "Fname");
    SelectList allinstructors = instructors != null ? new SelectList(instructors, "Id", "Fname") : new SelectList(new List<Instructor>(), "Id", "Fname");
} *@

@model Branch
@{
    ViewData["Title"] = "AddBranchTracks";
}
<h1>Add Tracks in Branch :@Model.Name</h1>

<div>
    <form method="post" id="branchTracksForm">
        <div class="form-group">
            <label for="trackId" class="mb-2"> Track:</label>
            <select class="form-control" id="trackId" name="trackId">
                <option >select Track</option>
                @foreach (var track in ViewBag.Tracks)
                {
                    <option value="@track.Id">@track.Name</option>
                }
            </select>
        </div>
        <div class="form-group">
            <label for="instructorId" class="mb-2"> Supervisor:</label>
            <select class="form-control" id="instructorId" name="instructorId">
                <option>select Supervisor</option>
                @foreach (var instructor in ViewBag.Instructors)
                {
                    <option value="@instructor.Id">@instructor.Fname</option>
                }
            </select>
        </div>
        <input type="hidden" name="branchId" value="@Model.Id" />
        <button type="submit" class="btn btn-primary mt-4" @(ViewBag.Tracks.Capacity == 0 ? "disabled" : "")>Add</button>
        <a href="/Branch/Index" class="btn btn-info   mt-4 ms-4">Back</a>
    </form>
</div>
<script>
    document.getElementById('branchTracksForm').addEventListener('submit', function (event) {
        var trackId = document.getElementById('trackId').value;
        var instructorId = document.getElementById('instructorId').value;

        if (!trackId || !instructorId) {
            event.preventDefault(); // Prevent form submission if supervisor or track is not selected
            alert('Please select both a supervisor and a track.');
        }
    });
</script>


